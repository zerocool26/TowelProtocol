policyId: "wu-003"
version: "1.0.0"
name: "Disable Delivery Optimization for Updates"
category: WindowsUpdate
description: |
  Disables Windows Update Delivery Optimization which uses peer-to-peer
  networking to download updates from other PCs on your local network or internet.

  When enabled, Delivery Optimization:
  - Uploads update data from your PC to other PCs
  - Downloads updates from other PCs instead of Microsoft servers
  - May send/receive data over internet to/from strangers' PCs
  - Collects and sends telemetry about P2P transfers to Microsoft

  Privacy concerns:
  - Your IP address shared with other PCs downloading updates
  - Telemetry about network topology sent to Microsoft
  - Bandwidth used for uploading to strangers without explicit consent

  When disabled:
  - Updates only download from Microsoft servers (traditional method)
  - No peer-to-peer upload/download
  - No Delivery Optimization telemetry
  - May use more Microsoft bandwidth but more private
mechanism: Registry
mechanismDetails:
  type: RegistryKey
  keyPath: "HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\DeliveryOptimization"
  valueName: "DODownloadMode"
  valueType: DWord
  valueData: 0
  expectedValue: "0x00000000"
supportStatus: Supported
riskLevel: Low
reversible: true
revertMechanism: "Set DODownloadMode to 1 (LAN) or 3 (Internet) or delete value"
applicability:
  minBuild: 22000
  maxBuild: null
  supportedSkus:
    - "Enterprise"
    - "Pro"
    - "Home"
    - "Education"
  excludedSkus: []
  deviceRequirement: null
  deprecatedAsOfBuild: null
dependencies: []
knownBreakage:
  - scenario: "Updates download only from Microsoft"
    severity: None
    details: "Traditional download method, potentially slower on slow connections"
  - scenario: "No bandwidth sharing for community"
    severity: None
    details: "You don't contribute to P2P network (privacy benefit)"
verificationCommand: "Get-DeliveryOptimizationStatus | Select-Object -ExpandProperty DownloadMode"
expectedOutput: "DODownloadMode: 0 (HTTP only, no peering)"
references:
  - "https://learn.microsoft.com/en-us/windows/deployment/do/waas-delivery-optimization"
  - "https://learn.microsoft.com/en-us/windows/privacy/manage-connections-from-windows-operating-system-components-to-microsoft-services#bkmk-updates"
tags:
  - "windowsupdate"
  - "privacy"
  - "p2p"
  - "low-risk"
  - "network"
  - "telemetry"
notes: |
  Low risk: Traditional download method is perfectly functional.

  Privacy benefits of disabling:
  - Your IP not shared with strangers downloading updates
  - No telemetry about your network topology
  - No bandwidth consumption for uploading to others
  - More private update delivery

  Performance consideration:
  - Slightly slower downloads on very slow internet connections
  - Uses more Microsoft server bandwidth (but Microsoft can handle it)
  - No practical performance impact for most users

  Recommended: Disable for privacy unless you specifically want to
  participate in Microsoft's P2P update distribution network.
enabledByDefault: false
includedInProfiles:
  - "MaximumPrivacy"
  - "Hardened"
  - "Balanced"
autoApply: false
requiresConfirmation: true
showInUI: true
userMustChoose: false
allowedValues:
  - value: 0
    label: "HTTP only (No peering)"
    description: "Download updates only from Microsoft servers. Maximum privacy."
    privacyBenefit: "High - No P2P sharing, no IP exposure, no upload telemetry"
    performanceImpact: "None for most users"
  - value: 1
    label: "LAN peering"
    description: "Download from other PCs on your local network only."
    privacyBenefit: "Medium - LAN only, no internet P2P"
    performanceImpact: "Faster on slow internet, shares with local network"
  - value: 2
    label: "Group peering"
    description: "Download from PCs in same AD domain/Azure AD group."
    privacyBenefit: "Low - Enterprise feature, controlled sharing"
    performanceImpact: "Best for enterprise environments"
  - value: 3
    label: "Internet peering"
    description: "Download from PCs on internet (strangers). Default Windows behavior."
    privacyBenefit: "None - IP shared globally, upload telemetry sent to Microsoft"
    performanceImpact: "Fastest downloads, but privacy concerns"
  - value: 99
    label: "Simple mode"
    description: "Download from Microsoft + LAN peers, no internet peers, no upload."
    privacyBenefit: "High - LAN only, no internet sharing"
    performanceImpact: "Good balance of speed and privacy"
